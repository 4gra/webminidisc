(this.webpackJsonpwebmd=this.webpackJsonpwebmd||[]).push([[0],{216:function(e,t,n){e.exports=n.p+"static/media/chrome-icon.f3b6c54c.svg"},246:function(e,t,n){e.exports=n(423)},269:function(e,t){},271:function(e,t){},304:function(e,t){},305:function(e,t){},403:function(e,t,n){},422:function(e,t,n){e.exports=function(){return new Worker(n.p+"e377e8c841742c6b7530.worker.js")}},423:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),c=n.n(i),o=n(18),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){console.log("state change",n.state),"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})},e.update()})).catch((function(e){console.error("Error during service worker registration:",e)}))}var u=n(6),p=n.n(u),f=n(13),m=n(43),d=n(30),b=n(20),g=n(212),h=n(371),v=function(){function e(t){var n=this,a=t.debug,r=void 0!==a&&a;if(Object(m.a)(this,e),this.netmdInterface=void 0,this.logger=void 0,r){var i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a;t&&t[0]&&t[0].method&&(a=console).log.apply(a,t)};this.logger={debug:i,info:i,warn:i,error:i,child:function(){return n.logger}}}}return Object(d.a)(e,[{key:"pair",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.openNewDevice)(navigator.usb,this.logger);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",!1);case 5:return this.netmdInterface=t,e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.openPairedDevice)(navigator.usb,this.logger);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",!1);case 5:return this.netmdInterface=t,e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"listContent",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(b.listContent)(this.netmdInterface);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getDeviceName",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.netMd.getDeviceName();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finalize",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.netMd.finalize();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renameTrack",value:function(){var e=Object(f.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=n.normalize("NFD").replace(/[^\x00-\x7F]/g,""),e.next=3,this.netmdInterface.setTrackTitle(t,n);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"renameDisc",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.getDiscTitle();case 2:return n=e.sent,e.next=5,this.netmdInterface._getDiscTitle();case 5:return a=(a=e.sent).replace(n,t),e.next=9,this.netmdInterface.cacheTOC();case 9:return e.next=11,this.netmdInterface.setDiscTitle(a);case 11:return e.next=13,this.netmdInterface.syncTOC();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteTrack",value:function(){var e=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.eraseTrack(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wipeDisc",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.eraseDisc();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"moveTrack",value:function(){var e=Object(f.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.moveTrack(t,n);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"upload",value:function(){var e=Object(f.a)(p.a.mark((function e(t,n,a,r){var i,c,o,l,s,u,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=function(){r({written:c,encrypted:o,total:i})},i=n.byteLength,c=0,o=0,s=new h,u=Object(g.makeGetAsyncPacketIteratorOnWorkerThread)(s,(function(e){var t=e.encryptedBytes;o=t,l()})),t=t.normalize("NFD").replace(/[^\x00-\x7F]/g,""),f=new b.MDTrack(t,a,n,524288,u),e.next=10,Object(b.download)(this.netmdInterface,f,(function(e){var t=e.writtenBytes;c=t,l()}));case 10:s.terminate();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a,r){return e.apply(this,arguments)}}()},{key:"play",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.play();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stop",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.stop();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"next",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.nextTrack();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prev",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.netmdInterface.previousTrack();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),k={},w=n(25),E=n(28),x=n(17),y=Object(E.b)({name:"uploadDialog",initialState:{visible:!1,writtenProgress:0,encryptedProgress:0,totalProgress:1,trackTotal:1,trackConverting:0,trackCurrent:0,titleCurrent:"",titleConverting:""},reducers:{setVisible:function(e,t){e.visible=t.payload},setWriteProgress:function(e,t){e.encryptedProgress=t.payload.encrypted,e.writtenProgress=t.payload.written,e.totalProgress=t.payload.total},setTrackProgress:function(e,t){e.trackTotal=t.payload.total,e.trackCurrent=t.payload.current,e.trackConverting=t.payload.converting,e.titleCurrent=t.payload.titleCurrent,e.titleConverting=t.payload.titleConverting}}}),j=y.reducer,O=y.actions,C=Object(x.enableBatching)(j),N=Object(E.b)({name:"renameDialog",initialState:{visible:!1,title:"",index:-1},reducers:{setVisible:function(e,t){e.visible=t.payload},setCurrentName:function(e,t){e.title=t.payload},setIndex:function(e,t){e.index=t.payload}}}),S=N.reducer,D=N.actions,P=Object(x.enableBatching)(S),F=Object(E.b)({name:"errorDialog",initialState:{visible:!1,error:""},reducers:{setVisible:function(e,t){e.visible=t.payload},setErrorMessage:function(e,t){e.error="".concat(t.payload)}}}),M=F.actions,T=F.reducer,W=Object(x.enableBatching)(T),L=Object(E.b)({name:"convertDialog",initialState:{visible:!1,format:"LP2"},reducers:{setVisible:function(e,t){e.visible=t.payload},setFormat:function(e,t){e.format=t.payload}}}),I=L.actions,A=L.reducer,B=Object(x.enableBatching)(A);function R(e){return Object(o.d)(e,o.b)}function V(e){return"".concat("/webminidisc","/").concat(e)}var _={mainView:"WELCOME",loading:!1,pairingFailed:!1,pairingMessage:"",browserSupported:!0,darkMode:function(e,t){var n=localStorage.getItem(e);if(null===n)return t;try{return JSON.parse(n)}catch(a){return t}}("darkMode",!1),aboutDialogVisible:!1},U=Object(E.b)({name:"app",initialState:_,reducers:{setState:function(e,t){e.mainView=t.payload},setLoading:function(e,t){e.loading=t.payload},setPairingFailed:function(e,t){e.pairingFailed=t.payload},setPairingMessage:function(e,t){e.pairingMessage=t.payload},setBrowserSupported:function(e,t){e.browserSupported=t.payload},setDarkMode:function(e,t){var n,a;e.darkMode=t.payload,n="darkMode",a=e.darkMode,localStorage.setItem(n,JSON.stringify(a))},showAboutDialog:function(e,t){e.aboutDialogVisible=t.payload}}}),z=U.reducer,J=U.actions,G=Object(x.enableBatching)(z),H=Object(E.b)({name:"main",initialState:{disc:null,deviceName:""},reducers:{setDisc:function(e,t){e.disc=t.payload},setDeviceName:function(e,t){e.deviceName=t.payload}}}),Y=H.reducer,q=H.actions,K=Object(x.enableBatching)(Y),$=Object(E.a)({reducer:{renameDialog:P,uploadDialog:C,errorDialog:W,convertDialog:B,appState:G,main:K},middleware:Object(w.a)(Object(E.c)())}),Q=n(9),X=n(485),Z=n(428),ee=n(486),te=n(473),ne=n(228),ae=n(477),re=n(26),ie=(n(377),n(231)),ce=n(214);function oe(){return function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(J.setLoading(!0)),e.next=3,k.netmdService.listContent();case 3:return n=e.sent,e.next=6,k.netmdService.getDeviceName();case 6:a=e.sent,t(Object(x.batchActions)([q.setDisc(n),q.setDeviceName(a),J.setLoading(!1)]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var le={SP:b.Wireformat.pcm,LP2:b.Wireformat.lp2,LP105:b.Wireformat.l105kbps,LP4:b.Wireformat.lp4};var se,ue,pe=n(470),fe=n(145),me=n(429),de=n(430),be=n(487),ge=n(468),he=n(462),ve=n(469),ke=n(466),we=n(467),Ee=n(465),xe=n(461),ye=r.a.forwardRef((function(e,t){return r.a.createElement(xe.a,Object.assign({direction:"up",ref:t},e))})),je=function(e){var t=Object(o.c)(),n=R((function(e){return e.appState.aboutDialogVisible}));return r.a.createElement(he.a,{open:n,maxWidth:"sm",fullWidth:!0,TransitionComponent:ye,"aria-labelledby":"about-dialog-slide-title"},r.a.createElement(Ee.a,{id:"about-dialog-slide-title"},"About Web MiniDisc"),r.a.createElement(ke.a,null,r.a.createElement(we.a,null,"Web MiniDisc has been made possible by"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://www.ffmpeg.org/",target:"_blank"},"FFmpeg")," ","and"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://github.com/ffmpegjs/FFmpeg",target:"_blank"},"ffmpegjs"),", to read your audio files (wav, mp3, ogg, mp4, etc...)."),r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://github.com/dcherednik/atracdenc/",target:"_blank"},"Atracdenc"),", to support atrac3 encoding (lp2, lp4 audio formats)."),r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://emscripten.org/",target:"_blank"},"Emscripten"),", to run both FFmpeg and Atracdenc in the browser."),r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/netmd-js",target:"_blank"},"netmd-js"),", to send commands to NetMD devices using Javascript."),r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://github.com/glaubitz/linux-minidisc",target:"_blank"},"linux-minidisc"),", to make the netmd-js project possible."),r.a.createElement("li",null,r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://material-ui.com/",target:"_blank"},"material-ui"),", to build the user interface.")),r.a.createElement(we.a,null,"Attribution"),r.a.createElement("ul",null,r.a.createElement("li",null,"MiniDisc logo from"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://en.wikipedia.org/wiki/MiniDisc",target:"_blank"},"https://en.wikipedia.org/wiki/MiniDisc")),r.a.createElement("li",null,"MiniDisc icon from"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://www.deviantart.com/blinkybill/art/Sony-MiniDisc-Plastic-Icon-473812540",target:"_blank"},"http://fav.me/d7u3g3g")))),r.a.createElement(ve.a,null,r.a.createElement(pe.a,{onClick:function(){t(J.showAboutDialog(!1))}},"Close")))},Oe=n(471),Ce=n(230),Ne=n(489),Se=n(215),De=n.n(Se),Pe=function(){var e=Object(o.c)(),t=R((function(e){return e.appState})).mainView,n=R((function(e){return e.main.disc})),a=r.a.useState(null),i=Object(re.a)(a,2),c=i[0],l=i[1],s=Boolean(c),u=function(){l(null)},m=[];return"MAIN"===t&&(m.push(r.a.createElement(Ne.a,{key:"update",onClick:function(){e(oe()),u()}},"Refresh")),m.push(r.a.createElement(Ne.a,{key:"title",onClick:function(){var t;e(Object(x.batchActions)([D.setVisible(!0),D.setCurrentName(null!==(t=null===n||void 0===n?void 0:n.title)&&void 0!==t?t:""),D.setIndex(-1)])),u()}},"Rename Disc")),m.push(r.a.createElement(Ne.a,{key:"wipe",onClick:function(){e(function(){var e=Object(f.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=k.netmdService,t(J.setLoading(!0)),e.next=4,n.wipeDisc();case 4:oe()(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u()}},"Wipe Disc")),m.push(r.a.createElement(Ne.a,{key:"exit",onClick:function(){e(J.setState("WELCOME")),u()}},"Exit"))),m.push(r.a.createElement(Ne.a,{key:"about",onClick:function(){e(J.showAboutDialog(!0)),u()}},"About")),m.push(r.a.createElement(Ne.a,{key:"github",onClick:u},r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://github.com/cybercase/webminidisc",target:"_blank"},"Fork me on GitHub"))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{"aria-label":"actions","aria-controls":"actions-menu","aria-haspopup":"true",onClick:function(e){l(e.currentTarget)}},r.a.createElement(De.a,null)),r.a.createElement(Ce.a,{id:"actions-menu",anchorEl:c,keepMounted:!0,open:s,onClose:u},m))},Fe=n(216),Me=n.n(Fe),Te=Object(te.a)((function(e){return{main:{position:"relative",flex:"1 1 auto",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center"},button:{marginTop:e.spacing(3),minWidth:150},spacing:{marginTop:e.spacing(1)},chromeLogo:{marginTop:e.spacing(1),width:96,height:96},why:{alignSelf:"flex-start",marginTop:e.spacing(3)},headBox:{display:"flex",justifyContent:"space-between"}}})),We=function(e){var t=Te(),n=Object(o.c)(),i=R((function(e){return e.appState})),c=i.browserSupported,l=i.pairingFailed,s=i.pairingMessage;s.toLowerCase().match(/denied/);var u=Object(a.useState)(!1),m=Object(re.a)(u,2),d=m[0],b=m[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:t.headBox},r.a.createElement(fe.a,{component:"h1",variant:"h4"},"Web MiniDisc"),r.a.createElement(Pe,null)),r.a.createElement(fe.a,{component:"h2",variant:"body2"},"Brings NetMD Devices to the Web"),r.a.createElement(be.a,{className:t.main},c?r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"Press the button to connect to a NetMD device"),r.a.createElement(pe.a,{variant:"contained",color:"primary",onClick:function(){return n(function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(J.setPairingFailed(!1)),e.next=3,k.audioExportService.init();case 3:return e.prev=3,e.next=6,k.netmdService.connect();case 6:if(!e.sent){e.next=10;break}return t(J.setState("MAIN")),e.abrupt("return");case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0);case 15:return e.prev=15,e.next=18,k.netmdService.pair();case 18:if(!e.sent){e.next=22;break}return t(J.setState("MAIN")),e.abrupt("return");case 22:t(Object(x.batchActions)([J.setPairingMessage("Connection Failed"),J.setPairingFailed(!0)])),e.next=30;break;case 25:e.prev=25,e.t1=e.catch(15),console.error(e.t1),a=e.t1.message,t(Object(x.batchActions)([J.setPairingMessage(a),J.setPairingFailed(!0)]));case 30:case"end":return e.stop()}}),e,null,[[3,12],[15,25]])})));return function(t,n){return e.apply(this,arguments)}}())},className:t.button},"Connect"),r.a.createElement(me.a,{error:!0,className:t.spacing,style:{visibility:l?"visible":"hidden"}},r.a.createElement(de.a,null,s))):r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"This Web browser is not supported.\xa0",r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"#",onClick:function(e){e.preventDefault(),b(!0)}},"Learn Why")),r.a.createElement(ge.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},r.a.createElement("img",{alt:"Chrome Logo",src:Me.a,className:t.chromeLogo})),r.a.createElement(fe.a,{component:"h2",variant:"subtitle1",align:"center",className:t.spacing},"Try using"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",target:"_blank",href:"https://www.google.com/chrome/"},"Chrome")," ","instead"),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(fe.a,{component:"p",variant:"body2",className:t.why},"Web MiniDisc requires a browser that supports both"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",target:"_blank",href:"https://wicg.github.io/webusb/"},"WebUSB")," ","and"," ",r.a.createElement(ge.a,{rel:"noopener noreferrer",target:"_blank",href:"https://webassembly.org/"},"WebAssembly"),"."),r.a.createElement("ul",null,r.a.createElement("li",null,"WebUSB is needed to control the NetMD device via the USB connection to your computer."),r.a.createElement("li",null,"WebAssembly is used to convert the music to a MiniDisc compatible format"))):null)),r.a.createElement(je,null))},Le=n(217),Ie=n(3),Ae=n(229),Be=n(15),Re=n(484),Ve=n(222),_e=n.n(Ve),Ue=n(220),ze=n.n(Ue),Je=n(221),Ge=n.n(Je),He=n(479),Ye=n(483),qe=n(482),Ke=n(480),$e=n(481),Qe=n(478),Xe=n(490),Ze=n(475),et=r.a.forwardRef((function(e,t){return r.a.createElement(xe.a,Object.assign({direction:"up",ref:t},e))})),tt=function(e){var t=Object(o.c)(),n=R((function(e){return e.renameDialog.visible})),a=R((function(e){return e.renameDialog.title})),i=R((function(e){return e.renameDialog.index})),c=i<0?"Disc":"Track",l=function(){t(D.setVisible(!1))},s=function(){t(i<0?function(e){var t=e.newName;return(function(){var e=Object(f.a)(p.a.mark((function e(n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=k.netmdService,e.next=3,a.renameDisc(t);case 3:n(D.setVisible(!1)),oe()(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}({newName:a}):function(e){var t=e.index,n=e.newName;return(function(){var e=Object(f.a)(p.a.mark((function e(a){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=k.netmdService,a(D.setVisible(!1)),e.prev=2,e.next=5,r.renameTrack(t,n);case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0),a(Object(x.batchActions)([M.setVisible(!0),M.setErrorMessage("Rename failed.")]));case 11:oe()(a);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}())}({index:i,newName:a}))};return r.a.createElement(he.a,{open:n,onClose:l,maxWidth:"sm",fullWidth:!0,TransitionComponent:et,"aria-labelledby":"rename-dialog-title"},r.a.createElement(Ee.a,{id:"rename-dialog-title"},"Rename ",c),r.a.createElement(ke.a,null,r.a.createElement(Ze.a,{autoFocus:!0,id:"name",label:"".concat(c," Name"),type:"text",fullWidth:!0,value:a,onKeyDown:function(e){"Enter"===e.key&&s()},onChange:function(e){t(D.setCurrentName(e.target.value.substring(0,120)))}})),r.a.createElement(ve.a,null,r.a.createElement(pe.a,{onClick:l},"Cancel"),r.a.createElement(pe.a,{color:"primary",onClick:s},"Rename")))},nt=n(476),at=Object(te.a)((function(e){return{progressPerc:{marginTop:e.spacing(1)},progressBar:{marginTop:e.spacing(3)},uploadLabel:{marginTop:e.spacing(3)}}})),rt=r.a.forwardRef((function(e,t){return r.a.createElement(xe.a,Object.assign({direction:"up",ref:t},e))})),it=function(e){var t=at(),n=R((function(e){return e.uploadDialog})),a=n.visible,i=n.writtenProgress,c=n.encryptedProgress,o=n.totalProgress,l=n.trackTotal,s=n.trackCurrent,u=n.trackConverting,p=n.titleCurrent,f=n.titleConverting,m=Math.floor(i/o*100),d=Math.floor(c/o*100),b=Math.floor(u/l*100);return r.a.createElement(he.a,{open:a,maxWidth:"sm",fullWidth:!0,TransitionComponent:rt,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(Ee.a,{id:"alert-dialog-slide-title"},"Recording..."),r.a.createElement(ke.a,null,r.a.createElement(we.a,{id:"alert-dialog-slide-description"},100===b&&u===l?"Conversion completed":"Converting ".concat(u+1," of ").concat(l,": ").concat(f)),r.a.createElement(nt.a,{className:t.progressBar,variant:0===b?"indeterminate":"determinate",color:"primary",value:b}),r.a.createElement(be.a,{className:t.progressPerc},b,"%"),r.a.createElement(we.a,{id:"alert-dialog-slide-description",className:t.uploadLabel},"Uploading ",s," of ",l,": ",p),r.a.createElement(nt.a,{className:t.progressBar,variant:"buffer",color:"secondary",value:m,valueBuffer:d}),r.a.createElement(be.a,{className:t.progressPerc},m,"%")),r.a.createElement(ve.a,null))},ct=r.a.forwardRef((function(e,t){return r.a.createElement(xe.a,Object.assign({direction:"up",ref:t},e))})),ot=function(e){var t=Object(o.c)(),n=R((function(e){return e.errorDialog})),a=n.visible,i=n.error;return r.a.createElement(he.a,{open:a,maxWidth:"sm",fullWidth:!0,TransitionComponent:ct,"aria-labelledby":"error-dialog-slide-title","aria-describedby":"error-dialog-slide-description"},r.a.createElement(Ee.a,{id:"alert-dialog-slide-title"},"Error"),r.a.createElement(ke.a,null,r.a.createElement(we.a,{id:"alert-dialog-slide-description"},i)),r.a.createElement(ve.a,null,r.a.createElement(pe.a,{onClick:function(){t(M.setVisible(!1))}},"Close")))},lt=n(435),st=n(433),ut=n(431),pt=r.a.forwardRef((function(e,t){return r.a.createElement(xe.a,Object.assign({direction:"up",ref:t},e))})),ft=Object(te.a)((function(e){return{container:{display:"flex",flexDirection:"row"},formControl:{minWidth:120}}})),mt=function(e){var t=Object(o.c)(),n=ft(),a=R((function(e){return e.convertDialog})),i=a.visible,c=a.format,l=function(){t(I.setVisible(!1))};return r.a.createElement(he.a,{open:i,maxWidth:"xs",fullWidth:!0,TransitionComponent:pt,"aria-labelledby":"convert-dialog-slide-title","aria-describedby":"convert-dialog-slide-description"},r.a.createElement(Ee.a,{id:"convert-dialog-slide-title"},"Upload Settings"),r.a.createElement(ke.a,null,r.a.createElement(me.a,{className:n.formControl},r.a.createElement(lt.a,{color:"secondary",id:"convert-dialog-format"},"Format"),r.a.createElement(st.a,{labelId:"convert-dialog-format-label",id:"convert-dialog-format",value:c,color:"secondary",onChange:function(e){t(I.setFormat(e.target.value))},input:r.a.createElement(ut.a,null)},r.a.createElement(Ne.a,{value:"SP"},"SP"),r.a.createElement(Ne.a,{value:"LP2"},"LP2"),r.a.createElement(Ne.a,{value:"LP4"},"LP4")))),r.a.createElement(ve.a,null,r.a.createElement(pe.a,{onClick:l},"Cancel"),r.a.createElement(pe.a,{onClick:function(){l(),t(function(e,t){return function(){var n=Object(f.a)(p.a.mark((function n(a,r){var i,c,o,l,s,u,m,d,g,h,v,w,E,y,j,C,N,S,D,P,F,T,W,L;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=k.audioExportService,c=k.netmdService,o=le[t],a(O.setVisible(!0)),l=function(e){var t=e.written,n=e.encrypted,r=e.total;a(O.setWriteProgress({written:t,encrypted:n,total:r}))},s={current:0,converting:0,total:e.length,titleCurrent:"",titleConverting:""},u=function(){a(O.setTrackProgress(s))},m=function(){var e=Object(ie.a)(p.a.mark((function e(n){var a,r,c,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=function(){if(r===n.length)return s.converting=r,s.titleConverting="",void u();var e=n[r];s.converting=r,s.titleConverting=e.name,u(),r++,a.push(new Promise(function(){var n=Object(f.a)(p.a.mark((function n(a,r){var o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.prepare(e);case 3:return n.next=5,i.export({format:t});case 5:o=n.sent,c(),a({file:e,data:o}),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),h=n.t0,v="".concat(e.name,": Unsupported or unrecognized format"),r(n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e,t){return n.apply(this,arguments)}}()))},a=[],r=0,c(),o=0;case 5:if(!(o<a.length)){e.next=12;break}return e.next=8,a[o];case 8:delete a[o],o++,e.next=5;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=r().main.disc,g=d?1700-Object(b.getTracks)(d).map((function(e){return e.title||""})).reduce((function(e,t){return e+t.length}),0):-1,g=Math.floor(g/e.length),v="",w=1,E=!0,y=!1,n.prev=14,C=Object(ce.a)(m(e));case 16:return n.next=18,C.next();case 18:return N=n.sent,E=N.done,n.next=22,N.value;case 22:if(S=n.sent,E){n.next=47;break}return P=(D=S).file,F=D.data,T=P.name,(W=T.lastIndexOf("."))>0&&(T=T.substring(0,W)),g>-1&&(T=T.substring(0,g)),s.current=w++,s.titleCurrent=T,u(),l({written:0,encrypted:0,total:100}),n.prev=34,n.next=37,null===c||void 0===c?void 0:c.upload(T,F,o,l);case 37:n.next=44;break;case 39:return n.prev=39,n.t0=n.catch(34),h=n.t0,v="".concat(P.name,": Error uploading to device"),n.abrupt("break",47);case 44:E=!0,n.next=16;break;case 47:n.next=53;break;case 49:n.prev=49,n.t1=n.catch(14),y=!0,j=n.t1;case 53:if(n.prev=53,n.prev=54,E||null==C.return){n.next=58;break}return n.next=58,C.return();case 58:if(n.prev=58,!y){n.next=61;break}throw j;case 61:return n.finish(58);case 62:return n.finish(53);case 63:L=[O.setVisible(!1)],h&&(console.error(h),L=L.concat([M.setVisible(!0),M.setErrorMessage(v)])),a(Object(x.batchActions)(L)),oe()(a);case 67:case"end":return n.stop()}}),n,null,[[14,49,53,63],[34,39],[54,,58,62]])})));return function(e,t){return n.apply(this,arguments)}}()}(e.files,c))}},"Ok")))},dt=n(488),bt=n(142),gt=Object(te.a)((function(e){return{add:{position:"absolute",bottom:e.spacing(3),right:e.spacing(3)},main:{overflowY:"auto",flex:"1 1 auto",marginBottom:e.spacing(3),marginLeft:e.spacing(-2),marginRight:e.spacing(-2),outline:"none"},toolbar:Object(Q.a)({marginTop:e.spacing(3),marginLeft:e.spacing(-2),marginRight:e.spacing(-2)},e.breakpoints.up(600+2*e.spacing(2)),{marginLeft:e.spacing(-3),marginRight:e.spacing(-3)}),toolbarLabel:{flex:"1 1 100%"},toolbarHighlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Be.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},headBox:{display:"flex",justifyContent:"space-between"},spacing:{marginTop:e.spacing(1)},formatBadge:Object(Le.a)({},bt.styles(e).badge,{},bt.styles(e).colorPrimary,{position:"static",display:"inline-flex",border:"2px solid ".concat(e.palette.background.paper),padding:"0 4px"}),titleCell:{overflow:"hidden",maxWidth:"40ch",textOverflow:"ellipsis"},indexCell:{whiteSpace:"nowrap",paddingRight:0,width:"2ch"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ht=(se={},Object(Q.a)(se,b.Encoding.sp,"SP"),Object(Q.a)(se,b.Encoding.lp2,"LP2"),Object(Q.a)(se,b.Encoding.lp4,"LP4"),se),vt=function(e){var t=Object(o.c)(),n=R((function(e){return e.main.disc})),i=R((function(e){return e.main.deviceName})),c=r.a.useState([]),l=Object(re.a)(c,2),s=l[0],u=l[1],m=s.length,d=r.a.useState(null),g=Object(re.a)(d,2),h=g[0],v=g[1],E=Object(a.useCallback)((function(e){v(e.currentTarget)}),[]),y=Object(a.useCallback)((function(){v(null)}),[]),j=Object(a.useCallback)((function(e){t(function(e,t){return function(){var n=Object(f.a)(p.a.mark((function n(a){var r;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=k.netmdService,n.next=3,r.moveTrack(e,t);case 3:oe()(a);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(s[0],e)),y()}),[t,s]);Object(a.useEffect)((function(){t(oe())}),[t]),Object(a.useEffect)((function(){u([])}),[n]);var O=r.a.useState([]),C=Object(re.a)(O,2),N=C[0],S=C[1],P=Object(a.useCallback)((function(e,n){S(e),t(I.setVisible(!0))}),[t]),F=Object(Ae.a)({onDrop:P,accept:"audio/*",noClick:!0}),M=F.getRootProps,T=F.getInputProps,W=F.isDragActive,L=F.open,A=gt(),B=[];if(null!==n){var V=!0,_=!1,U=void 0;try{for(var z,G=n.groups[Symbol.iterator]();!(V=(z=G.next()).done);V=!0){var H=z.value,Y=!0,q=!1,K=void 0;try{for(var $,X=H.tracks[Symbol.iterator]();!(Y=($=X.next()).done);Y=!0){var ee,te,ne=$.value;B.push({index:ne.index,title:null!==(ee=ne.title)&&void 0!==ee?ee:"Unknown Title",group:null!==(te=H.title)&&void 0!==te?te:"",encoding:ht[ne.encoding],duration:Object(b.formatTimeFromFrames)(ne.duration,!1)})}}catch(ie){q=!0,K=ie}finally{try{Y||null==X.return||X.return()}finally{if(q)throw K}}}}catch(ie){_=!0,U=ie}finally{try{V||null==G.return||G.return()}finally{if(_)throw U}}}B.sort((function(e,t){return e.index-t.index}));var ae=function(e,a){var r,i,c=a,o=null!==(r=null===(i=Object(b.getTracks)(n).find((function(e){return e.index===c})))||void 0===i?void 0:i.title)&&void 0!==r?r:"";t(Object(x.batchActions)([D.setVisible(!0),D.setCurrentName(o),D.setIndex(c)]))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(be.a,{className:A.headBox},r.a.createElement(fe.a,{component:"h1",variant:"h4"},i||"Loading..."),r.a.createElement(Pe,null)),r.a.createElement(fe.a,{component:"h2",variant:"body2"},null!==n?"".concat(Object(b.formatTimeFromFrames)(n.left,!1)," left of ").concat(Object(b.formatTimeFromFrames)(n.total,!1)):"Loading..."),r.a.createElement(Qe.a,{className:Object(Ie.default)(A.toolbar,Object(Q.a)({},A.toolbarHighlight,m>0))},m>0?r.a.createElement(dt.a,{indeterminate:m>0&&m<B.length,checked:m>0,onChange:function(e){s.length<B.length?u(B.map((function(e){return e.index}))):u([])},inputProps:{"aria-label":"select all tracks"}}):null,m>0?r.a.createElement(fe.a,{className:A.toolbarLabel,color:"inherit",variant:"subtitle1"},m," selected"):r.a.createElement(fe.a,{component:"h3",variant:"h6",className:A.toolbarLabel},(null===n||void 0===n?void 0:n.title)||"Untitled Disc"),1===m?r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,{title:"Move to Position"},r.a.createElement(pe.a,{"aria-controls":"move-menu","aria-label":"Move",onClick:E},"Move")),r.a.createElement(Ce.a,{id:"move-menu",anchorEl:h,open:!!h,onClose:y,PaperProps:{style:{maxHeight:300}}},Array(B.length).fill(null).map((function(e,t){return r.a.createElement(Ne.a,{key:"pos-".concat(t),onClick:function(){return j(t)}},t+1)})))):null,m>0?r.a.createElement(Xe.a,{title:"Delete"},r.a.createElement(Oe.a,{"aria-label":"delete",onClick:function(e){var n;t((n=s,function(){var e=Object(f.a)(p.a.mark((function e(t){var a,r,i,c,o,l,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=k.netmdService,t(J.setLoading(!0)),(n=n.sort()).reverse(),r=!0,i=!1,c=void 0,e.prev=7,o=n[Symbol.iterator]();case 9:if(r=(l=o.next()).done){e.next=16;break}return s=l.value,e.next=13,a.deleteTrack(s);case 13:r=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),i=!0,c=e.t0;case 22:e.prev=22,e.prev=23,r||null==o.return||o.return();case 25:if(e.prev=25,!i){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:oe()(t);case 31:case"end":return e.stop()}}),e,null,[[7,18,22,30],[23,,25,29]])})));return function(t){return e.apply(this,arguments)}}()))}},r.a.createElement(ze.a,null))):null,m>0?r.a.createElement(Xe.a,{title:"Rename"},r.a.createElement(Oe.a,{"aria-label":"rename",disabled:1!==m,onClick:function(e){ae(0,s[0])}},r.a.createElement(Ge.a,null))):null),r.a.createElement(be.a,Object.assign({className:A.main},M()),r.a.createElement("input",T()),r.a.createElement(He.a,{size:"small"},r.a.createElement(Ke.a,null,r.a.createElement($e.a,null,r.a.createElement(qe.a,{className:A.indexCell},"#"),r.a.createElement(qe.a,null,"Title"),r.a.createElement(qe.a,null,"Format"),r.a.createElement(qe.a,{align:"right"},"Duration"))),r.a.createElement(Ye.a,null,B.map((function(e){return r.a.createElement($e.a,{hover:!0,selected:s.includes(e.index),key:e.index,onDoubleClick:function(t){return ae(0,e.index)},onClick:function(t){return n=e.index,void(s.includes(n)?u(s.filter((function(e){return e!==n}))):u([].concat(Object(w.a)(s),[n])));var n}},r.a.createElement(qe.a,{className:A.indexCell},e.index+1),r.a.createElement(qe.a,{className:A.titleCell,title:e.title},e.title||"No Title"),r.a.createElement(qe.a,null,r.a.createElement("span",{className:A.formatBadge},e.encoding)),r.a.createElement(qe.a,{align:"right"},e.duration))})))),r.a.createElement(Z.a,{className:A.backdrop,open:W},"Drop your Music to Upload")),r.a.createElement(Re.a,{color:"primary","aria-label":"add",className:A.add,onClick:L},r.a.createElement(_e.a,null)),r.a.createElement(it,null),r.a.createElement(tt,null),r.a.createElement(ot,null),r.a.createElement(mt,{files:N}),r.a.createElement(je,null))},kt=n(224),wt=n.n(kt),Et=n(225),xt=n.n(Et),yt=n(226),jt=n.n(yt),Ot=n(223),Ct=n.n(Ot),Nt=function(){var e=Object(a.useCallback)((function(){var e;null===(e=k.netmdService)||void 0===e||e.prev()}),[]),t=Object(a.useCallback)((function(){var e;null===(e=k.netmdService)||void 0===e||e.play()}),[]),n=Object(a.useCallback)((function(){var e;null===(e=k.netmdService)||void 0===e||e.stop()}),[]),i=Object(a.useCallback)((function(){var e;null===(e=k.netmdService)||void 0===e||e.next()}),[]);return r.a.createElement(be.a,null,r.a.createElement(Oe.a,{"aria-label":"prev",onClick:e},r.a.createElement(Ct.a,null)),r.a.createElement(Oe.a,{"aria-label":"play",onClick:t},r.a.createElement(wt.a,null)),r.a.createElement(Oe.a,{"aria-label":"stop",onClick:n},r.a.createElement(xt.a,null)),r.a.createElement(Oe.a,{"aria-label":"next",onClick:i},r.a.createElement(jt.a,null)))},St=n(424),Dt=n(227),Pt=n.n(Dt),Ft=Object(te.a)((function(e){return{layout:Object(Q.a)({width:"auto",height:"100%"},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:Object(Q.a)({position:"relative",display:"flex",flexDirection:"column",padding:e.spacing(2),height:"100%"},e.breakpoints.up(600+2*e.spacing(2)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3),height:600}),copyright:Object(Q.a)({display:"flex",alignItems:"center"},e.breakpoints.down(600+2*e.spacing(2)),{flexWrap:"wrap"}),backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},minidiscLogo:{width:48},controlsContainer:Object(Q.a)({flex:"1 1 auto",paddingLeft:e.spacing(3),paddingRight:e.spacing(8)},e.breakpoints.down(600+2*e.spacing(2)),{order:-1,width:"100%",paddingLeft:0})}})),Mt=Object(ne.a)({palette:{type:"dark",primary:{light:"#6ec6ff",main:"#2196f3",dark:"#0069c0",contrastText:"#fff"}}}),Tt=Object(ne.a)({palette:{type:"light"}}),Wt=function(){var e=Ft(),t=Object(o.c)(),n=R((function(e){return e.appState})),a=n.mainView,i=n.loading,c=n.darkMode;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{theme:c?Mt:Tt},r.a.createElement(X.a,null),r.a.createElement("main",{className:e.layout},r.a.createElement(St.a,{className:e.paper},"WELCOME"===a?r.a.createElement(We,null):null,"MAIN"===a?r.a.createElement(vt,null):null,r.a.createElement(be.a,{className:e.copyright},r.a.createElement(Oe.a,{onClick:function(){return t(J.setDarkMode(!c))}},r.a.createElement(Pt.a,{color:c?"secondary":void 0})),r.a.createElement(fe.a,{variant:"body2",color:"textSecondary",style:{marginRight:"8px"}},"\xa9 ",r.a.createElement(ge.a,{rel:"noopener noreferrer",color:"inherit",target:"_blank",href:"https://stefano.brilli.me/"},"Stefano Brilli")," ",(new Date).getFullYear(),"."),r.a.createElement(ge.a,{rel:"noopener noreferrer",href:"https://twitter.com/share?ref_src=twsrc%5Etfw",className:"twitter-share-button","data-via":"thecybercase","data-hashtags":"MiniDisc","data-dnt":"true","data-show-count":"false"},"Tweet"),r.a.createElement(be.a,{className:e.controlsContainer},"MAIN"===a?r.a.createElement(Nt,null):null)))),r.a.createElement(Z.a,{className:e.backdrop,open:i},r.a.createElement(ee.a,{color:"inherit"}))))},Lt=(n(403),n(143)),It=n(2),At=function(){function e(t){Object(m.a)(this,e),this.worker=t,this.messageCallback=void 0,t.onmessage=this.handleMessage.bind(this)}return Object(d.a)(e,[{key:"init",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.messageCallback=e,t.worker.postMessage({action:"init"})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"encode",value:function(){var e=Object(f.a)(p.a.mark((function e(t,n){var a,r=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){r.messageCallback=e,r.worker.postMessage({action:"encode",bitrate:n,data:t},[t])}));case 2:return a=e.sent,e.abrupt("return",a.data.result);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"terminate",value:function(){this.worker.terminate()}},{key:"handleMessage",value:function(e){this.messageCallback(e),this.messageCallback=void 0}}]),e}();"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&(onmessage=function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,i,c,o,l,s,u,f,m;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.data,a=n.action,r=Object(It.a)(n,["action"]),"init"===a?(self.importScripts(V("atracdenc.js")),self.Module().then((function(e){ue=e,self.postMessage({action:"init"}),ue.setLogger&&ue.setLogger((function(e,t){return console.log("".concat(t,": ").concat(e))}))}))):"encode"===a&&(i=r.bitrate,c=r.data,"inWavFile.wav","outAt3File.aea",o=new Uint8Array(c),ue.FS.writeFile("".concat("inWavFile.wav"),o),ue.callMain(["-e","atrac3","-i","inWavFile.wav","-o","outAt3File.aea","--bitrate",i]),l=ue.FS.stat("outAt3File.aea"),s=l.size,u=new Uint8Array(s-96),f=ue.FS.open("outAt3File.aea","r"),ue.FS.read(f,u,0,u.length,96),ue.FS.close(f),m=u.buffer,self.postMessage({action:"encode",result:m},[m]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var Bt=n(422),Rt=function(){function e(){Object(m.a)(this,e),this.ffmpegProcess=void 0,this.atracdencProcess=void 0,this.loglines=[],this.inFileName="",this.outFileNameNoExt=""}return Object(d.a)(e,[{key:"init",value:function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(Lt.setLogging)(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"prepare",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loglines=[],this.ffmpegProcess=Object(Lt.createWorker)({logger:function(e){a.loglines.push(e),console.log(e.action,e.message)},corePath:V("ffmpeg-core.js"),workerPath:V("worker.min.js")}),e.next=4,this.ffmpegProcess.load();case 4:return this.atracdencProcess=new At(new Bt),e.next=7,this.atracdencProcess.init();case 7:if(0!==(n=t.name.split(".").slice(-1)).length){e.next=10;break}throw new Error("Unrecognized file format: ".concat(t.name));case 10:return this.inFileName="inAudioFile.".concat(n[0]),this.outFileNameNoExt="outAudioFile",e.next=14,this.ffmpegProcess.write(this.inFileName,t);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"info",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a,r,i,c,o,l,s,u,f;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ffmpegProcess.transcode(this.inFileName,"".concat(this.outFileNameNoExt,".metadata"),"-f ffmetadata");case 2:t=/Audio:\s(.*?),/,n=/Input #0,\s(.*?),/,a=null,r=null,i=!0,c=!1,o=void 0,e.prev=9,l=this.loglines[Symbol.iterator]();case 11:if(i=(s=l.next()).done){e.next=26;break}if(u=s.value,null===(f=u.message.match(t))){e.next=17;break}return a=f[1],e.abrupt("continue",23);case 17:if(null===(f=u.message.match(n))){e.next=21;break}return r=f[1],e.abrupt("continue",23);case 21:if(null===a||null===r){e.next=23;break}return e.abrupt("break",26);case 23:i=!0,e.next=11;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(9),c=!0,o=e.t0;case 32:e.prev=32,e.prev=33,i||null==l.return||l.return();case 35:if(e.prev=35,!c){e.next=38;break}throw o;case 38:return e.finish(35);case 39:return e.finish(32);case 40:return e.abrupt("return",{format:a,input:r});case 41:case"end":return e.stop()}}),e,this,[[9,28,32,40],[33,,35,39]])})));return function(){return e.apply(this,arguments)}}()},{key:"export",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var n,a,r,i,c,o,l,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("SP"!==(n=t.format)){e.next=12;break}return r="".concat(this.outFileNameNoExt,".raw"),e.next=5,this.ffmpegProcess.transcode(this.inFileName,r,"-f s16be -ar 44100");case 5:return e.next=7,this.ffmpegProcess.read(r);case 7:i=e.sent,c=i.data,a=c.buffer,e.next=32;break;case 12:return o="".concat(this.outFileNameNoExt,".wav"),e.next=15,this.ffmpegProcess.transcode(this.inFileName,o,"-f wav -ar 44100");case 15:return e.next=17,this.ffmpegProcess.read(o);case 17:l=e.sent,s=l.data,u="0",e.t0=n,e.next="LP2"===e.t0?23:"LP105"===e.t0?25:"LP4"===e.t0?27:29;break;case 23:return u="128",e.abrupt("break",29);case 25:return u="102",e.abrupt("break",29);case 27:return u="64",e.abrupt("break",29);case 29:return e.next=31,this.atracdencProcess.encode(s.buffer,u);case 31:a=e.sent;case 32:return this.ffmpegProcess.worker.terminate(),this.atracdencProcess.terminate(),e.abrupt("return",a);case 35:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();k.netmdService=new v({debug:!0}),k.audioExportService=new Rt,window.addEventListener("beforeunload",(function(e){$.getState().uploadDialog.visible&&(e.preventDefault(),e.returnValue="Warning! Recording will be interrupted")})),navigator&&navigator.usb?navigator.usb.ondisconnect=function(){$.dispatch(J.setState("WELCOME"))}:$.dispatch(J.setBrowserSupported(!1)),window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault()})),c.a.render(r.a.createElement(o.a,{store:$},r.a.createElement(Wt,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/webminidisc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/webminidisc","/final-service-worker.js");l?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()}},[[246,1,2]]]);
//# sourceMappingURL=main.c8b1ca1b.chunk.js.map